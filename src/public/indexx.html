<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gondar City Information Provider</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
      }

      /* Header Style */
      header {
        background-image: url("https://a1auto.sfo2.cdn.digitaloceanspaces.com/media/car-shipping-quote-gondar.jpg?hash=27a9948d5465c2ce9869667e50d03390");
        background-size: cover;
        background-position: center;
        color: white;
        text-align: center;
        position: relative;
        height: 300px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      header h1 {
        font-size: 2.5em;
        margin: 0;
        z-index: 2;
        position: relative;
      }

      header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1;
      }

      /* Navigation Bar */
      nav {
        background-color: #004080;
        overflow: hidden;
      }

      nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        justify-content: center;
      }

      nav ul li {
        margin: 0 15px;
      }

      nav ul li a {
        color: white;
        text-decoration: none;
        padding: 14px 20px;
        display: block;
      }

      nav ul li a:hover {
        background-color: #003366;
      }

      /* Search Bar */
      .search-bar {
        margin: -30px auto 20px auto;
        max-width: 600px;
        display: flex;
        justify-content: center;
        z-index: 2;
        position: relative;
      }

      .search-bar input[type="text"] {
        width: 80%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
        transition: box-shadow 0.3s ease;
      }

      .search-bar input[type="text"]:focus {
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
      }

      .search-icon {
        position: absolute;
        top: 50%;
        right: 10px; /* Adjust position as needed */
        transform: translateY(-50%); /* Center vertically */
        cursor: pointer; /* Make it look clickable */
      }

      .search-icon i { 
        font-size: 1.2em; /* Adjust icon size as needed */
        color: #777; /* Adjust icon color */
      }
      /* Search Results Menu */
      #resultsMenu {
        display: none;
        position: absolute;
        top: 60px; 
        width: 80%;
        max-width: 600px;
        margin: 0 auto;
        background-color: white;
        border: 1px solid #ccc; 
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        max-height: 300px; 
        overflow-y: auto;
        padding: 0; /* Remove default padding */
        list-style: none; /* Remove bullet points */
      }

      #resultsMenu .result-item {
        padding: 12px 16px; 
        border-bottom: 1px solid #ddd;
        cursor: pointer;
        text-decoration: none;
        color: #333;
        font-size: 14px; 
        display: flex;
        align-items: center; 
      }

      #resultsMenu .result-item:hover {
        background-color: #f4f4f4;
      }

      #resultsMenu .result-item img { /* If you want to add thumbnails */
        width: 40px; 
        height: 40px;
        object-fit: cover; 
        margin-right: 10px;
      }

      #resultsMenu .result-item .result-text { 
        flex-grow: 1; /* Allow text to fill available space */
      }

      #resultsMenu .result-item h3 { /* Style the result title */
        margin: 0 0 5px 0; /* Reduce top and bottom margins */
        font-size: 1em; 
      }

      #resultsMenu .result-item .result-type {
        font-size: 0.8em;
        color: #777;
        margin: 0; /* Remove default margin */
      }

      /* Main Content */
      .content {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 60px;
        padding: 60px;
      }

      .content a {
        text-decoration: none;
        color: inherit;
        display: block;
      }

      .content div {
        padding: 20px;
        background-color: #f2f2f2;
        text-align: center;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s ease, transform 0.3s ease;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .content div:hover {
        background-color: #e0e0e0;
        transform: translateY(-5px);
      }

      .content div h2 {
        font-size: 1.5em;
        margin-bottom: 10px;
      }

      .content div p {
        font-size: 1em;
        color: #333;
      }

      /* Footer Styles */
      footer {
        background-color: #222; 
        color: #fff;            
        padding: 50px 20px;     
        text-align: center;     
        position: relative; 
        overflow: hidden;
    }

    footer p {
        margin: 0 0 10px 0;     
        font-size: 0.9em;        
    }

    .footer-links {
        display: flex;
        flex-direction: column; 
        align-items: center;   
        margin-bottom: 20px;   
    }

    .footer-links a {
        color: #fff;
        text-decoration: none;
        margin: 5px 0;         
        transition: color 0.3s ease, transform 0.2s ease;
    }

    .footer-links a:hover {
        color: #00c853;        
        transform: scale(1.1); 
    }

    /* Footer Social Icons */
    .social-icons { 
        margin-bottom: 15px; 
    }

    .social-icons a { 
        display: inline-block; 
        margin: 0 10px; 
        font-size: 1.8em;        
        color: #fff;            
        transition: color 0.3s ease; 
    }

    .social-icons a:hover i {
        color: #ffd700; 
    }

    /* Back-to-Top Button */
    #backToTopBtn {
        display: none; 
        position: fixed;
        bottom: 20px;
        right: 20px; 
        background-color: #00c853;
        color: white;
        border: none;
        border-radius: 50%; 
        padding: 10px;
        cursor: pointer;
        z-index: 10; 
        transition: opacity 0.3s ease;
    }

    #backToTopBtn:hover {
        opacity: 0.8;
    }

    /* Animated Gradient Background */
    .gradient-background { 
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to right, #007bff, #00c853);
        background-size: 400% 100%;
        animation: gradientAnimation 10s ease infinite;
        z-index: -1; 
    }

    @keyframes gradientAnimation {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    /* Media Query for Responsiveness  */
    @media screen and (max-width: 768px) { 
        .footer-links {
            flex-direction: row;    
            flex-wrap: wrap;         
            justify-content: center; 
        }

        .footer-links a {
            margin: 5px 10px;         
        }
    } 

        .search-bar {
          flex-direction: column;
          width: 90%;
        }

        .search-bar input[type="text"] {
          width: 100%;
          border-radius: 4px;
          margin-bottom: 10px;
        }

        .content {
          padding: 20px;
          gap: 20px;
        }

        .content div {
          padding: 15px;
        }
      

      @media screen and (max-width: 480px) {
        header {
          height: 200px;
        }

        header h1 {
          font-size: 1.5em;
        }

        .search-bar {
          margin-top: -20px;
        }

        .content {
          grid-template-columns: 1fr;
        }

        .footer-links a {
          display: block;
          margin: 10px 0;
        }
      }
    </style>
  </head>
  <body>
    <header>
      
      <div class="welcome">
        <h2>Gondar City Information Provider</h2>
        <h2>Welcome to Gondar!</h2>
        <p>Your one-stop source for information about our beautiful city. Explore our site to find details on local services, attractions, events, and more. We're here to help you make the most of your time in Gondar.</p>
    </div>
    </header>

    <!-- Search Bar -->
    <div class="search-bar">
      <input
        type="text"
        id="searchInput"
        placeholder="Search Gondar City Information..."
        oninput="performSearch()"
        autofocus
      /> 
      <span class="search-icon" onclick="performSearch()">
        <i class="fas fa-search"></i> 
      </span>
    </div>

    <!-- Search Results Menu -->
    <ul id="resultsMenu"></ul> <div class="content">
      <!-- Example sections linking to other pages -->
      <a href="viewWaterSupplyInfo.html" data-sector="Water Supply" onclick="saveSector('Water Supply')">
        <div>
          <h2>View Water Supply Information</h2>
          <p>Access detailed information on city water supply services, including maintenance schedules and contact details.</p>
        </div>
      </a>
      <a href="viewHealthSectorInfo.html" data-sector="Health sector" onclick="saveSector('Health sector')">
        <div>
          <h2>View Health Sector Information</h2>
          <p>Find the contact details and services provided by the city's health departments and elected officials.</p>
        </div>
      </a>
      <a href="viewTourismInfo.html" data-sector="Tourism-info" onclick="saveSector('Tourism-info')">
        <div>
          <h2>View Tourism Hotel Information</h2>
          <p>Explore available hotels and accommodations, along with information on COVID-19 vaccination and testing services.</p>
        </div>
      </a>
      <a href="viewEventFestivalInfo.html" data-sector="Event&festival-info" onclick="saveSector('Event&festival-info')">
        <div>
          <h2>View Event Festival Information</h2>
          <p>Discover local events, festivals, and other community activities in Gondar.</p>
        </div>
      </a>
      <a href="viewTransportationInfo.html" data-sector="Transportation" onclick="saveSector('Transportation')">
        <div>
          <h2>View Transportation Information</h2>
          <p>Get details on public transportation options, including schedules and routes within the city.</p>
        </div>
      </a>
      <a href="viewSecurityInfo.html" data-sector="Security-info" onclick="saveSector('Security-info')">
        <div>
          <h2>View Security Information</h2>
          <p>Get details on Security issues.</p>
        </div>
      </a>
    </div>

    <footer>
      <div class="gradient-background"></div> 
      <p>© 2024 City Information Provider</p>
  
      <div class="footer-links">
          <div class="contact-info">
              <p>
                  <i class="fas fa-envelope"></i> <a href="mailto:gondarcity1628@gmail.com">gondarcity1628@gmail.com</a><br>
                  <i class="fas fa-phone"></i> <a href="tel:+251912345678">+251-912-345-678</a> <span class="tel-note">(*For urgent inquiries)</span>
              </p>
          </div>
  
          <div class="social-icons">
              <a href="https://www.facebook.com/p/Gondar-City-Administration-Civil-Service-Department-100068613683044/" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i></a>
              <a href="#" target="_blank" rel="noopener noreferrer"><i class="fab fa-twitter"></i></a>
              <a href="https://www.instagram.com/explore/locations/243145311/gondar-ethiopia/" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
          </div>
  
          <a href="AdminLogin.html">Admin Login</a>
          <a href="login.html" onclick="signOut()">Sign Out</a>

      </div>
  
      <button onclick="scrollToTop()" id="backToTopBtn" title="Go to top">
          <i class="fas fa-chevron-up"></i> 
      </button>
  </footer>
  

    <script>

       // Check if the user is authenticated
  window.onload = function () {
    const user = localStorage.getItem('user'); // or 'auth', depending on how you store the user session

    // If not authenticated, redirect to login page
    if (!user) {
      window.location.href = 'login.html';
    }
  };
      async function performSearch() {
        const query = document.getElementById('searchInput').value;
        const resultsMenu = document.getElementById('resultsMenu');
        
        // Clear previous results
        resultsMenu.innerHTML = '';

        if (query.length < 2) {
          resultsMenu.style.display = 'none';
          return;
        }

        try {
          // Fetch search results from the backend
          const response = await fetch(`http://localhost:3000/api/post/posts_by_search/${encodeURIComponent(query)}`);
          const results = await response.json();
           
          // Populate the results menu
          if (results.length > 0) {
            resultsMenu.style.display = 'block';
            results.forEach(result => {
              // Create list item
              const resultItem = document.createElement('li'); 
              resultItem.className = 'result-item';

              // Add thumbnail (if you have image URLs)
              // if (result.imageUrl) {
              //     const img = document.createElement('img');
              //     img.src = result.imageUrl; 
              //     resultItem.appendChild(img);
              // }

              // Add text content 
              const resultTextDiv = document.createElement('div');
              resultTextDiv.className = 'result-text'; 

              const resultTitle = document.createElement('h3');
              resultTitle.textContent = result.title;
              resultTextDiv.appendChild(resultTitle);

              const resultType = document.createElement('p');
              resultType.className = 'result-type';
              resultType.textContent = result.type; 
              resultTextDiv.appendChild(resultType);

              // Add the text content to the list item
              resultItem.appendChild(resultTextDiv); 

              // Add click event to list item 
              resultItem.onclick = () => {
                  // Store the post ID in local storage
                  localStorage.setItem('selectedPostId', result.id);
                  // Redirect to viewPost.html
                  window.location.href = 'viewPost.html'; 
              };

              resultsMenu.appendChild(resultItem); 
            });
          } else {
            resultsMenu.style.display = 'none';
          }
        } catch (error) {
          console.error('Error fetching search results:', error);
        }
      }

      function saveSector(sector) {
        localStorage.setItem('selectedSector', sector);
      }

      window.onscroll = function() {scrollFunction()};
    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("backToTopBtn").style.display = "block";
        } else {
            document.getElementById("backToTopBtn").style.display = "none";
        }
    }

    // Smooth scrolling to top function
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    function signOut() {
    // Clear all user-related data from localStorage
    localStorage.removeItem('auth');
    localStorage.removeItem('user');
    
    // Redirect to login page
    window.location.href = 'login.html';
}
    </script>
  </body>
</html>